<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta                                       charset="UTF-8">
        <meta   http-equiv="Permissions-Policy"     content="interest-cohort=()">
        <meta   http-equiv="Cache-Control"          content="no-cache">
        <meta   http-equiv="Pragma"                 content="no-cache">
        <meta   name="viewport"                     content="width=device-width, initial-scale=1.0">
        <meta   name="author"                       content="Plutonny">
        <meta   name="keywords"                     content="КСК-11, кск, кск 11, акт кск, акт">
        <meta   name="description"                  content="Страница группы КСК-11">
        <meta   name="theme-color" id="theme-color" content="#202020">
        <title  id="title-page"                     >КСК-11 | главная</title>
        <link   rel="manifest"                      href="manifest.json">
        
        <link   rel="preload prefetch stylesheet"   href="static/load.css?cache=399" as="style">
        <link   rel="preload prefetch stylesheet"   href="static/main.css?cache=399" as="style">
        <link   rel="icon"                          href="static/g-icon.png?cache=399">

        <!-- addScript() -->
        <!--<script type="text/javascript">
            function addScript(src){ var script = document.createElement('script'); script.type = 'text/javascript'; script.src = src; script.async = false; document.head.appendChild(script) }
        </script>-->

        <link   rel="preconnect"                    href="//fonts.googleapis.com">
        <link   rel="preconnect"                    href="//fonts.gstatic.com" crossorigin>
        <link   rel="stylesheet"                    href="//fonts.googleapis.com/css2?family=Montserrat&display=swap">
        <link   rel="stylesheet"                    href="//fonts.googleapis.com/css2?family=Nunito:wght@600&display=swap">
        <link   rel="preload prefetch stylesheet"   href="//fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" as="style">
        <style>      .material-symbols-rounded      { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 26 }</style>
        
        <script type="text/javascript"              src="//cdn.jsdelivr.net/npm/eruda"></script>
        
        <script type="text/javascript"              src="//lib.plutonny.ru/plutonny.js/v1.0.js?cache=398"></script>
        <script type="text/javascript"              src="//lib.plutonny.ru/luxon.js?cache=399"></script>
        <script type="text/javascript"              src="//lib.plutonny.ru/solar.js?cache=399"></script>
        <script type="text/javascript"              src="//lib.plutonny.ru/xlsx.js?cache=399"></script>
        
        <style  id="root-colors-theme"              >#thMoon, #thSun { display: none; }</style>

        <!-- GLOBAL VARIABLES -->
        <script type="text/javascript">
            "use strict";
            
            var siteVersion = '4.0.0'
            var siteBuild = '4'

            var WEEKEND = [0, 6]
            var NUMSEMESTR = 0 // TODO 
    
            var CURRDATE = new Date()

            var BETA = window.location.href.toLowerCase().includes('beta')
            var ALPHA = window.location.href.toLowerCase().includes('alpha') /*delete after*/ || true

            // Week variable: num week and names (EN, RU, alternative)
            var WEEK = { num: luxon.DateTime.now().weekNumber }
            WEEK.name = {
                RU: WEEK.num % 2 == 1 ? 'желтая' : 'зеленая',
                EN: WEEK.num % 2 == 1 ? 'yellow' : 'green',
                alt: {
                    RU: WEEK.num % 2 == 1 ? 'зеленая' : 'желтая',
                    EN: WEEK.num % 2 == 1 ? 'green' : 'yellow',
                }
            }

            try { var URLDIR = window.location.href.split('#')[1].split('/') } catch { console.log('index.html -> no dir information'); var URLDIR = [''] }
            try { var URLDATA = plutonny.get.URLAttributes(window.location.href) } catch { console.error('index.html -> plutonny.js are not found'); var URLDATA = [''] }
        </script>

        <!-- link(); WEEK; modal(); capitalise() -->
        <script type="text/javascript">
            /**
            *      {
            *          type:   str  ('assets' or 'HTML')
            *          file:   str  (from type of file, example: 'frames.js' or 'simple/')
            *          noVer:  bool (ignore beta and alpha repository)
            *      }
            */
            function link(to) {
                try {
                    var isBeta = (BETA && (!to.noVer)),
                        isAlpha = (ALPHA && (!to.noVer))
                    if (window.location.href.includes('plutonny.ru')) {
                        if (to.type == 'assets') return `https://${isBeta ? 'beta.' : isAlpha ? 'alpha.' : ''}college.plutonny.ru/static/${to.file}?t=${Date.now()}`
                        if (to.type == 'HTML')   return `https://${isBeta ? 'beta.' : isAlpha ? 'alpha.' : ''}college.plutonny.ru/${to.file}`
                    }
                    if (window.location.href.includes('127.0.0.1')) {
                        if (to.type == 'assets') return `http://127.0.0.1:5500/static/${to.file}?t=${Date.now()}`
                        if (to.type == 'HTML')   return `http://127.0.0.1:5500/${to.file}`
                    }
                } catch (e) {
                    plutonny.console.error('index.html -> link()', e)
                }
            }

            
            if (BETA || ALPHA) {
                eruda.init()
                console.log(`
                Это тестовая версия сайта https://college.plutonny.ru
                Если вы увидели какой-то баг или хотите поделиться своим мнением, то пишите разработчику: https://vk.me/pltny
                `)
                console.log(`Версия: ${siteVersion} билд ${siteBuild}
                Plutonny.js: v${plutonny.version} build ${plutonny.build}
                Luxon.js: week ${luxon.DateTime.now().weekNumber} ${WEEK.name.EN}
                Solar.js: sunrise ${SunCalc.getTimes(CURRDATE, 64.4, 40.4).sunrise}`)
            }


            function capitalize(text) { return text.charAt(0).toUpperCase() + text.slice(1) }


            /**
             *  Outputted modal (div id "modal" need)
             * 
             *      "content" - HTML code for output on fullscreen
             * 
             */
            async function modal(content) {
                try {
                    await plutonny.sleep(200)
                    if (localStorage.getItem('theme') == 'dark')  document.getElementById('theme-color').content = '#2a2a2a'
                    if (localStorage.getItem('theme') == 'light') document.getElementById('theme-color').content = '#9b9b9b'
                    plutonny.output('modal', `
                        <div class="max-modal">
                            <style>
                                div#modal { position: fixed; height: 100%; width: 100%; background-color :#40404075; z-index: 99; }
                                div.max-modal { height: 100%; display: flex; justify-content: center; align-items: center; z-index: 100; }
                            </style>
                            ${content}
                        </div>
                    `) 
                    return true
                } catch (e) {
                    plutonny.console.error('index.html -> modal()', e)
                    return false
                }
            }

            if (BETA)  siteVersion += ' beta'
            if (ALPHA) siteVersion += ' alpha'
        </script>

        <!-- theme -->
        <script type="text/javascript">
            /**
             *  Work with theme in site (style id "root-colors-theme" need)
             *      
             *      theme.prepare() returned current theme in bool format (true - dark theme, false - light theme)
             *      theme.load() loaded theme (used in storage.js and in modals)
             *      theme.change() changed theme to reverse and load theme again
             * 
             */
            var theme = {
                light: `:root {
                    --text-color:                 #101520 !important;
                    --text-color-active:          #353535 !important;
                    --bg-color:                   #f5f5f5 !important;
                    --bg-color-navbar:            #e3e3e3 !important;
                    --bg-color-header:            #e9e9e9 !important;
                    --button-color:               #dddddd !important;
                    --button-color-hover:         #d2d2d2 !important;
                    --button-color-active:        #c0c0c0 !important;
                    --button-color-header:        #f5f5f5 !important;
                    --button-color-hover-header:  #f0f0f0 !important;
                    --button-color-active-header: #e0e0e0 !important;
                    --box-shadow-color:           #a5a5a5 !important;
                    --icon-color:                 #707070 !important;
                    --ui-green:                   #7cf779 !important;
                    --ui-yellow:                  #f3ee67 !important;
                    --week-color:                 var(--${WEEK.name.EN})    !important;
                    --week-ui-color:              var(--ui-${WEEK.name.EN}) !important;
                }`,
                dark: `:root {
                    --text-color:                 #f4f4f4 !important;
                    --text-color-active:          #a9a9a9 !important;
                    --bg-color:                   #000000 !important;
                    --bg-color-navbar:            #111111 !important;
                    --bg-color-header:            #181818 !important;
                    --button-color:               #303030 !important;
                    --button-color-hover:         #3a3a3a !important;
                    --button-color-active:        #454545 !important;
                    --button-color-header:        #020202 !important;
                    --button-color-hover-header:  #0a0a0a !important;
                    --button-color-active-header: #121212 !important;
                    --box-shadow-color:           #080808 !important;
                    --icon-color:                 #707070 !important;
                    --ui-green:                   #114110 !important;
                    --ui-yellow:                  #454306 !important;
                    --week-color:                 var(--${WEEK.name.EN})    !important;
                    --week-ui-color:              var(--ui-${WEEK.name.EN}) !important;
                }`,
                prepare: function() {

                    if (localStorage.getItem('THEME-type') == null || localStorage.getItem('THEME-type') == '')
                        { plutonny.console.warn('global.js -> theme.prepare()', 'theme type is undefined, set to default'); localStorage.setItem('THEME-type', 1) }

                    if (localStorage.getItem('THEME') == null || localStorage.getItem('THEME') == '')
                        { plutonny.console.warn('global.js -> theme.prepare()', 'theme is undefined, set theme to light'); localStorage.setItem('THEME', 'light') }

                    if (localStorage.getItem('THEME') != 'light' && localStorage.getItem('THEME') != 'dark')
                        { plutonny.console.warn('global.js -> theme.prepare()', 'theme is incorrect, set theme to light'); localStorage.setItem('THEME', 'light') }

                    if (localStorage.getItem('THEME-EnThBt') == null || localStorage.getItem('THEME-EnThBt') == '')
                        { plutonny.console.warn('global.js -> theme.prepare()', 'theme button is undefined, turned it on'); localStorage.setItem('THEME-EnThBt', true) }

                    if (localStorage.getItem('THEME-type') == 2)
                        { localStorage.setItem('THEME-EnThBt', false) }

                    try {
                        var onDateSunriseSunset = SunCalc.getTimes(CURRDATE, 64.4, 40.4)
                        if (localStorage.getItem('THEME-type') == 2) { 
                            if (onDateSunriseSunset.sunrise < CURRDATE && CURRDATE < onDateSunriseSunset.sunset) { localStorage.setItem('THEME', 'light') } 
                            else                                                                                 { localStorage.setItem('THEME', 'dark') } 
                        }
                    } catch (e) { plutonny.console.error('global.js -> theme.prepare()', e) }
                    if (localStorage.getItem('THEME') == 'light') return false
                    if (localStorage.getItem('THEME') == 'dark')  return true
                },

                change: function() {
                    if (theme.prepare()) localStorage.setItem('THEME', 'light')
                    else                 localStorage.setItem('THEME', 'dark')
                    theme.load()
                }, 

                load: async function() {
                    if (theme.prepare()) { document.getElementById('root-colors-theme').innerHTML = `${theme.dark} #thMoon { display: none; }`; await plutonny.sleep(65); document.getElementById('theme-color').content = '#181818' }
                    else                 { document.getElementById('root-colors-theme').innerHTML = `${theme.light} #thSun { display: none; }`; await plutonny.sleep(65); document.getElementById('theme-color').content = '#e9e9e9' }
                },

                default: async function() {
                    document.getElementById('root-colors-theme').innerHTML = `#thSun, #thMoon { display: none; }`; await plutonny.sleep(65); document.getElementById('theme-color').content = '#202020'
                }

            }; theme.load()
        </script>
        
        <!-- getPairsChanges() -->
        <script>
            function getPairsChanges(date) {
                var linkTIME = `https://cors-anywhere.herokuapp.com/https://arcotel.ru/doc/stud/${date}.xlsx`
                var req = new XMLHttpRequest();
                req.open("GET", linkTIME, true);
                req.responseType = "arraybuffer";
                req.send()

                req.onload = function(e) {
                    var data = new Uint8Array(req.response);
                    var workbook = XLSX.read(data, {type:"array"});

                    var list = workbook.Sheets[workbook.SheetNames[0]]
                    var r = XLSX.utils.decode_range("AH5:AI22");
                    document.querySelector(".pairChanges").innerHTML = XLSX.utils.sheet_to_html(XLSX.utils.json_to_sheet(XLSX.utils.sheet_to_json(list, {range: r})))
                }
                
                if (req.status != 200) {    
                    var linkTIME = `https://cors-anywhere.herokuapp.com/https://arcotel.ru/doc/stud/${date}.xls`
                    var req1 = new XMLHttpRequest();
                    req1.open("GET", linkTIME, true);
                    req1.responseType = "arraybuffer";
                    req1.send()

                    req1.onload = function(e) {
                        var data = new Uint8Array(req1.response);
                        var workbook = XLSX.read(data, {type:"array"});

                        var list = workbook.Sheets[workbook.SheetNames[0]]
                        var r = XLSX.utils.decode_range("AH5:AI22");
                        document.querySelector(".pairChanges").innerHTML = XLSX.utils.sheet_to_html(XLSX.utils.json_to_sheet(XLSX.utils.sheet_to_json(list, {range: r})))
                    }

                    if (req1.status != 200) {
                        document.querySelector(".pairChanges").innerHTML = 'index.html -> getChangesPair', 'no file found. enable cors anywhere'
                    }
                }
            }
        </script>

        <!-- FRAMES -->
        <script type="text/javascript">
            var FRAMES = {
            /**
             *  Outputted header
             * 
             *      Example of settings list:
             *          {
             *          textCenter: str,
             *          buttonTheme: bool,
             *          buttonBack: bool,
             *          enableHR: bool,
             *          HTMLAfter: str (HTML format)
             *          }
             * 
             */
            header: function(settings) {
                try {
                    var inj = '';

                    if (settings.buttonTheme && localStorage.getItem('themeEnableThemeButton') == 'true' && localStorage.getItem('themeType') == 1) {
                        inj += `<button 
                                    class="theme_button" 
                                    style="height: 38px; width: 38px; z-index: 90; border: none !important; fill: currentColor; left: 100%; position: absolute; margin: 14px 0px 0px -52px; border-radius: 100px; cursor: pointer; padding: 2px 3px 0px 3px; background-color: transparent;" 
                                    onclick="theme.change()">
                                    <span class="material-symbols-rounded" style="font-size: 32px !important;" id="thMoon">dark_mode</span> 
                                    <span class="material-symbols-rounded" style="font-size: 32px !important;" id="thSun">light_mode</span>
                                </button>`
                    }

                    if (settings.buttonBack) {
                        inj += `<button 
                                    class="back_button" 
                                    style="height: 38px; width: 38px; z-index: 90; border: none !important; fill: currentColor; position: absolute; margin-left: 8px; margin-top: 14px; border-radius: 100px; cursor: pointer; padding: 2px 3px 0px 3px; background-color: transparent;" 
                                    onclick="history.back()">
                                    <span class="material-symbols-rounded" style="font-size: 32px !important;">arrow_back</span>
                                </button>`
                    }

                    plutonny.output(`header`, `
                        <div class="hdr">
                            <style>
                                #header {
                                    z-index: 3;
                                    width: 100vw;
                                    background-color: var(--bg-color-header);
                                    border-radius: 0 0 24px 24px;
                                }
                                .hdr { 
                                    padding-bottom: 12px; 
                                    display: flex; 
                                    flex-direction: row; 
                                    flex-wrap: nowrap; 
                                    align-items: center;
                                }
                            </style>
                            <div style="margin-right: auto;"></div>
                            <p style="text-align: center; font-size: 20px; margin-bottom: 8px; z-index: 10;">${settings.textCenter}</p>
                            <div style="margin-right: auto;"></div>
                            ${inj}
                        </div>
                        ${settings.enableHR ? `<hr style="border: none; height: 0.5px; margin-top: 0; margin-bottom: 0; background-color: var(--text-color); opacity: 0.1; width: calc(100% - 20px);">` : ''}
                        ${settings.HTMLAfter}
                    `)

                    return true

                } catch (e) { 

                    plutonny.console.error('frames.js -> header', e) 
                    return false

                }
            },
            navbar: function(navbarActive) {
                plutonny.output('navbar', `
                <style>
                    #navbar {
                        top: calc(100% - 66px);
                        width: 100%;
                        height: 54px;
                        z-index: 10;
                        padding-bottom: 12px;
                        position: fixed;
                        background-color: var(--bg-color-navbar);
                    }

                    .iconNavbar {
                        padding: 1px 16px;
                        border-radius: 100px;
                    }

                    .buttonsNavbar {
                        padding: 6px;
                        height: 100%;
                        display: flex;
                        flex-direction: row;
                        flex-wrap: nowrap;
                        justify-content: space-around;
                        align-items: center;
                    }

                    .${navbarActive}ANavbar { color: var(--text-color) !important; }
                    .${navbarActive}AIcon { background-color: var(--week-ui-color); }

                </style>

                <div class="buttonsNavbar">

                    <div style="width: 20%">
                        <a style="text-decoration: none;" href="${link({type: 'HTML', file: '#/'})}">
                            <div style="display: flex; flex-direction: column; flex-wrap: nowrap; align-items: center;">
                                <p class="homeANavbar homeAIcon iconNavbar" style="color: var(--icon-color); fill: currentColor; margin: 0; height: 26px;"><span class="material-symbols-rounded" style="font-size: 26px !important;">home</span></p>
                                <p class="homeANavbar" style="color: var(--icon-color); margin: 0; font-size: 14px; font-family: 'Montserrat';">главная</p>
                            </div>
                        </a>
                    </div>

                    <div style="width: 20%">
                        <a style="text-decoration: none;" href="${link({type: 'HTML', file: '#/grades/'})}">
                            <div style="display: flex; flex-direction: column; flex-wrap: nowrap; align-items: center;">
                                <p class="gradesANavbar gradesAIcon iconNavbar" style="color: var(--icon-color); fill: currentColor; margin: 0; height: 26px;"><span class="material-symbols-rounded" style="font-size: 26px !important;">assignment_turned_in</span></p>
                                <p class="gradesANavbar" style="color: var(--icon-color); margin: 0; font-size: 14px; font-family: 'Montserrat';">оценки</p>
                            </div>
                        </a>
                    </div>

                    <div style="width: 20%">
                        <a style="text-decoration: none;" href="${link({type: 'HTML', file: '#/other/'})}">
                            <div style="display: flex; flex-direction: column; flex-wrap: nowrap; align-items: center;">
                                <p class="otherANavbar otherAIcon iconNavbar" style="color: var(--icon-color); fill: currentColor; margin: 0; height: 26px;"><span class="material-symbols-rounded" style="font-size: 26px !important;">menu</span></p>
                                <p class="otherANavbar" style="color: var(--icon-color); margin: 0; font-size: 14px; font-family: 'Montserrat';">другое</p>
                            </div>
                        </a>
                    </div>

                </div>
                `)
            },
            /**
             * 
             *  {
             *      size: int,
             *      border: int,
             *      color: "HEX",
             *      icon: "in Google symbols",
             *  }
             * 
             */
            cIcon: function(settings) {
                return `
                    <div style="height: ${settings.size}px; width: ${settings.size}px; display: flex; align-content: center; justify-content: center; align-items: center; background-color: ${settings.color}40; border-radius: ${settings.border}px">
                        <span style="color: ${settings.color}" class="material-symbols-rounded">${settings.icon}</span>
                    </div>
                `
            }
        }
        </script>

        <!-- serviceWorker -->
        <script type="text/javascript">
            function enableLogger() {
                if ('serviceWorker' in navigator) { 
                    window.addEventListener('load', function() {
                        navigator.serviceWorker.register(link({type: 'HTML', file: 'service-worker.js'})).then(
                            function(registration) { if (BETA || ALPHA) console.log(`ServiceWorker: registration with scope ${registration.scope}`) },
                            function(e) { plutonny.console.error('global.js -> enableLogger()', `ServiceWorker registration failed: ${e}`) }
                        ).catch(function(e) { plutonny.console.error('global.js -> enableLogger()', `ServiceWorker function (${e})`) })
                    })
                } else plutonny.console.warn('global.js -> enableLogger()', 'Service worker is not supported')
            }; enableLogger()
        </script>

    </head>
    <body>

        <noscript>Включите JavaScript чтобы пользоваться сайтом</noscript>

        <div class="modal" id="modal"></div>

        <div id="genload" class="genload">
            <style>
                .genload {
                    backdrop-filter: blur(10px);
                    position: absolute;
                    z-index: 100;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    align-content: center;
                    height: 100vh;
                    width: 100vw;
                }
                .loader_box {
                    border-radius: 28px;
                    background-color: var(--bg-color-header);
                    height: 120px;
                    width: 120px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    align-content: center;
                }
                html, body { margin: 0; }
            </style>
            <div class="loader_box">
                <div class="loader">
                    <svg viewBox="0 0 80 80">
                        <circle cx="40" cy="40" r="32"></circle>
                    </svg>
                </div>
            </div>
        </div>

        <div class="content" id="content">
            <div class="header" id="header">
                <script>
                    FRAMES.header({
                        textCenter: 'Альфа версия', 
                        buttonTheme: true, 
                        buttonBack: false, 
                        enableHR: true, 
                        HTMLAfter: `
                            <div style="display: flex; flex-direction: row; align-content: center; align-items: center; justify-content: center;">
                                    <button class="header" style="display: flex; flex-direction: column; padding: 12px; height: 120px; width: 50%; margin: 6px 3px 6px 6px; border-radius: 20px;" onclick="window.location.href = '/#/timetable/alerts'">
                                        ${FRAMES.cIcon({size: 36, border: 8, color: "#ff0000", icon: "notifications"})}
                                        <p style="margin: 12px 0px 0px 0px; text-align: left; font-size: 18px; font-family: 'Montserrat';">Звонки</p>
                                    </button>
                                    <button class="header" style="display: flex; flex-direction: column; padding: 12px; height: 120px; width: 50%; margin: 6px 6px 6px 3px; border-radius: 20px;" onclick="window.location.href = '/#/timetable/week'">
                                        ${FRAMES.cIcon({size: 36, border: 8, color: "#0000ff", icon: "calendar_month"})}
                                        <p style="margin: 12px 0px 0px 0px; text-align: left; font-size: 18px; font-family: 'Montserrat';">Расписание</p>
                                    </button>
                            </div>
                        `
                    })
                </script>
            </div>
            <div class="navbar" id="navbar">
                <script>FRAMES.navbar('home')</script>
            </div>
        </div>

        <!--<iframe style="height: 225px; width: 350px;" src="https://cors-anywhere.herokuapp.com/corsdemo" frameborder="0"></iframe>-->

        <!-- <a href="https://cors-anywhere.herokuapp.com/corsdemo" target="_blank">Получить доступ к изменениям</a> -->

        <script>
                var today = new Date()
                var todayChanges = `${today.getDate() < 10 ? `0` : ``}${today.getDate()}.${today.getMonth() < 9 ? `0` : ``}${today.getMonth() + 1}`
                var tomorrow = new Date()
                tomorrow.setDate(today.getDate()+1)
                var tomorrowChanges = `${tomorrow.getDate() < 10 ? `0` : ``}${tomorrow.getDate()}.${tomorrow.getMonth() < 9 ? `0` : ``}${tomorrow.getMonth() + 1}`

                function modalCORS() {
                    modal(`
                        <div style="margin: 0 18px; max-height: 95%; overflow-y: auto; background-color: var(--bg-color-navbar); border: none; border-radius: 24px; box-shadow: 0px 0px 8px var(--box-shadow-color);">
                            <h1 style="font-family: 'Montserrat' !important; text-align: center; margin: 16px;">Доступ</h1>
                            <iframe style="height: 225px; width: 350px;" src="https://cors-anywhere.herokuapp.com/corsdemo" frameborder="0"></iframe>
                            <div style="display: flex; justify-content: center;">
                                <button style="cursor: pointer; border: none; border-radius: 24px; height: 36px; font-size: 17px; width: 128px; margin: 4px 16px 16px 16px;" onclick="document.getElementById('modal').innerHTML = ''; theme.load()">закрыть</button>
                            </div>
                        </div>
                    `) 
                }
                
            </script>
        <div class="basicalButtons">
            <button onclick="modalCORS()">Получить доступ к изменениям</button>
            <button onclick="getPairsChanges(todayChanges)">Изменения на сегодня</button>
            <button onclick="getPairsChanges(tomorrowChanges)">Изменения на завтра</button>
        </div>
        <div class="pairChanges"></div>

        <!-- Clear loading div -->
        <script>
            window.addEventListener('load', async function() { await plutonny.sleep(1000); document.getElementById('genload').remove() })
        </script>

        <!-- Update modal work -->
        <script>
            window.onload = function() {
                if (!(localStorage.getItem(`noDisplayUpdate${siteVersion}`) == 'true')) { 
                    if (document.getElementById('update-modal') == null) document.body.innerHTML += '<div id="update-modal" class="update-modal"><div>'
                    plutonny.output('update-modal', `
                        <div id="mini-update-modal" class="mini-update-modal">
                            <style>
                                #update-modal { position: absolute; top: 0; width: 100vw; z-index: 99; }
                                .mini-update-modal { display: flex; justify-content: space-between; align-items: center; z-index: 100; margin: 8px; padding: 6px 12px 6px 6px; background-color: var(--bg-color); box-shadow: 0px 0px 8px var(--box-shadow-color); border-radius: 24px; }
                            </style>
                            <div style="display: flex; flex-direction: row; align-items: center;">
                                <div style="display: flex; justify-content: center; align-items: center;border-radius: 100px; width: 30px; height: 30px; background-color: #0000ff55;"><span style="color: #0000ff;" class="material-symbols-rounded">exclamation</span></div>
                                <p style="margin: 0 0 0 8px; word-break: break-all;">Вышло обновление</p>
                            </div>
                            <a style="margin: 0; word-break: break-all; text-decoration: none; color: blue;" href="${link({type: 'HTML', file: 'support/?updates/'})}">изменения</a>
                        </div>`)
                        localStorage.setItem(`noDisplayUpdate${siteVersion}`, true)
                }
            }
        </script>

    </body>
</html>